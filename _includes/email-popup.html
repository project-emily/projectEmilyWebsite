<!-- <a class="uk-button uk-button-default" href="#modal-center" uk-toggle>Open</a> -->

<div id="modal-center" class="uk-flex-top" uk-modal>
  <div class="uk-modal-dialog uk-padding-small uk-margin-auto-vertical">
    <button class="uk-modal-close-default" type="button" uk-close></button>

    <div
      class="no-padding-left uk-width-1-2@m uk-align-center uk-padding-remove@m"
    >
      <div class="uk-text-center">
        <img
          class="uk-border-circle avatar"
          src="../uploads/img/emily-head-shot.JPG"
        />
      </div>
    </div>

    {% unless include.border_top -%}
    <div class="uk-margin-medium-bottom">
      <hr class="uk-margin-remove" />
    </div>
    {%- endunless -%}

    <div class="uk-container-xsmall uk-margin-medium-bottom">
      <h2 class="section-title uk-margin-bottom uk-text-center">
        Newsletter Sign-up
      </h2>
      <p class="uk-text-lead uk-margin-medium-bottom uk-text-center">
        Get book reviews delivered right to your inbox.
      </p>
      <div
        class="uk-flex-center uk-margin-medium-top uk-margin-small-bottom"
        data-uk-grid
        data-uk-scrollspy="cls: uk-animation-slide-bottom; repeat: true"
      >
        <!-- Begin Mailchimp Signup Form -->
        <div id="mc_embed_signup" class="uk-width-1-1 uk-width-4-5@m">
          <form
            action="https://project-emily.us17.list-manage.com/subscribe/post?u=903c550764d419b6f6da0516d&amp;id=c9c298b88a"
            method="post"
            id="mc-embedded-subscribe-form"
            name="mc-embedded-subscribe-form"
            class="validate"
            target="_blank"
            novalidate
          >
            <div id="mc_embed_signup_scroll" class="uk-grid-small" data-uk-grid>
              <div class="uk-width-1-1 uk-width-expand@s">
                <div class="mc-field-group">
                  <input
                    type="email"
                    value=""
                    placeholder="Email Address"
                    name="EMAIL"
                    class="required email uk-input uk-form-large uk-width-1-1 uk-border-rounded"
                    id="mce-EMAIL"
                  />
                </div>
              </div>
              <div class="uk-width-1-1 uk-width-auto@s">
                <div id="mce-responses" class="clear">
                  <div
                    class="response"
                    id="mce-error-response"
                    style="display: none"
                  ></div>
                  <div
                    class="response"
                    id="mce-success-response"
                    style="display: none"
                  ></div>
                </div>
                <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
                <div
                  style="position: absolute; left: -5000px"
                  aria-hidden="true"
                >
                  <input
                    type="text"
                    name="b_903c550764d419b6f6da0516d_c9c298b88a"
                    tabindex="-1"
                    value=""
                  />
                </div>
                <div class="clear uk-text-center">
                  <input
                    type="submit"
                    value="Subscribe"
                    name="subscribe"
                    id="mc-embedded-subscribe"
                    class="button uk-button uk-button-primary uk-button-large uk-border-rounded"
                  />
                </div>
              </div>
            </div>
          </form>
        </div>
        <!--End mc_embed_signup-->
      </div>
    </div>
  </div>
</div>

<!-- UIkit.modal("#modal-center").show(); -->

<script>
  // Email Subscription POPUP Window

  // Sets the cookie with Name, Value, and number of day before cookie expires.
  function setCookie(name, value, days) {
    var expires = "";
    if (days) {
      var date = new Date();
      date.setTime(date.getTime() + days * 24 * 60 * 60 * 1000);
      expires = "; expires=" + date.toUTCString();
    }
    document.cookie = name + "=" + (value || "") + expires + "; path=/";
  }

  // Searches all cookies for the cookie with the provided Name.
  function getCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(";");
    for (var i = 0; i < ca.length; i++) {
      var c = ca[i];
      while (c.charAt(0) == " ") c = c.substring(1, c.length);
      if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
    }
    return null;
  }

  // Activates the POPUP window and sets the 'email-popup' cookie when the mouse leaves the body element or after 20 seconds passes.

  var popup = function () {
    if (getCookie("email-popup") === null && navigator.cookieEnabled === true) {
      document.querySelector("body").addEventListener("mouseleave", () => {
        if (getCookie("email-popup") === null) {
          UIkit.modal("#modal-center").show();
          return setCookie("email-popup", "true", 7);
        }
      });
      return setTimeout(function () {
        if (getCookie("email-popup") === null) {
          UIkit.modal("#modal-center").show();
          return setCookie("email-popup", "true", 7);
        }
      }, 20000);
    }
  };
  popup();
</script>
